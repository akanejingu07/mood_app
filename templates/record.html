{% extends "base.html" %}
{% block content %}

<form method="POST" class="record-card">
  <!-- 日付 -->
  <div class="form-group">
    <label for="record_date">日付</label>
    <input
    type="date"
    name="record_date"
    value="{{ record['date'] }}"
    onchange="location.href='/record?date=' + this.value"
  >
  
  
  </div>

  <!-- 気分スコア -->
  <div class="form-group">
    <label for="score">気分スコア</label>
    <div class="score-slider-wrapper">
      <input type="range" id="score" name="score" min="0" max="10"
             value="{{ record.score if record else 5 }}">
      <span id="score-value">{{ record.score if record else 5 }}</span>
    </div>
  </div>

  <!-- 天気 -->
  <div class="form-group">
    <label for="weather">天気</label>
    <select id="weather" name="weather">
      {% set weathers = ['晴れ','雨','くもり','雪'] %}
      {% for w in weathers %}
      <option value="{{ w }}"
        {% if record["weather"] == w %}selected{% endif %}>
        {{ w }}
      </option>    
      {% endfor %}
    </select>
  </div>

  <!-- 良かったこと -->
  <div class="form-group">
    <label for="good1">良かったこと1</label>
    <input type="text" name="good1" value="{{ record["good1"] or '' }}">
  </div>
  <div class="form-group">
    <label for="good2">良かったこと2</label>
    <input type="text" name="good2" value="{{ record["good2"] or '' }}">
  </div>
  <div class="form-group">
    <label for="good3">良かったこと3</label>
    <input type="text" name="good3" value="{{ record["good3"] or '' }}">
  </div>

  <button type="submit" class="button">{{ edit and "更新" or "保存" }}</button>
</form>

<script>
  const slider = document.getElementById("score");
  const output = document.getElementById("score-value");
  slider.addEventListener("input", () => {
    output.textContent = slider.value;
  });
</script>
{% endblock %}
