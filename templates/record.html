{% extends "base.html" %}
{% block content %}

<h2>
  {% if edit %}
    {{ record.date.strftime("%Y-%m-%d") }}の記録
  {% else %}
    今日の記録
  {% endif %}
</h2>

<form method="POST">
  <input type="hidden" name="record_date" value="{{ record.date if edit else date }}">

  <label>天気:</label>
  <select name="weather">
    {% set weathers = ['晴れ', '雨', 'くもり', '雪', 'その他'] %}
    {% for w in weathers %}
      <option value="{{ w }}" {% if edit and record.weather == w %}selected{% endif %}>
        {{ w }}
      </option>
    {% endfor %}
  </select>

  <label>スコア:</label>
  <input type="number" name="score" min="0" max="10" value="{{ record.score if edit else '' }}">

  <label>良かったこと1:</label>
  <input type="text" name="good1" value="{{ record.good1 if edit else '' }}">

  <label>良かったこと2:</label>
  <input type="text" name="good2" value="{{ record.good2 if edit else '' }}">

  <label>良かったこと3:</label>
  <input type="text" name="good3" value="{{ record.good3 if edit else '' }}">

  <button type="submit">保存</button>
</form>

<p>
  <a href="/calendar">カレンダーを見る</a> |
  <a href="/history">履歴に戻る</a>
</p>

{% endblock %}

  
  </form>
  <p>
    <a href="/history">これまでの記録を見る</a>
  </p>
  
  <p>
    <a href="/logout">ログアウト</a>
  </p>
  </div>
  <script>
    const dateInput = document.getElementById("recordDate");
    const dateDisplay = document.getElementById("dateDisplay");
  
    const weekdays = ["日", "月", "火", "水", "木", "金", "土"];
  
    dateInput.addEventListener("change", () => {
      if (!dateInput.value) return;
  
      const d = new Date(dateInput.value);
      const weekday = weekdays[d.getDay()];
  
      dateDisplay.textContent = `${dateInput.value}（${weekday}）`;
    });
  </script>
  
</body>
</html>
