{% extends "base.html" %}
{% block content %}
<h2>{{ edit and record.date.strftime("%Y-%m-%d") or date }} の記録</h2>

<form method="POST">
  <div class="record-card">
    <div class="form-group">
      <label for="record_date">日付</label>
      <input type="date" id="record_date" name="record_date"
             value="{{ edit and record.date.strftime('%Y-%m-%d') or date }}">
    </div>

    <div class="form-group">
      <label for="score">スコア</label>
      <input type="number" id="score" name="score" min="0" max="10"
             value="{{ edit and record.score or '' }}">
    </div>

    <div class="form-group">
      <label for="weather">天気</label>
      <select id="weather" name="weather">
        {% set weathers = ['晴れ','雨','くもり','雪'] %}
        {% for w in weathers %}
          <option value="{{ w }}" {% if edit and record.weather == w %}selected{% endif %}>{{ w }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="form-group">
      <label for="good1">良かったこと1</label>
      <input type="text" id="good1" name="good1" value="{{ edit and record.good1 or '' }}">
    </div>
    <div class="form-group">
      <label for="good2">良かったこと2</label>
      <input type="text" id="good2" name="good2" value="{{ edit and record.good2 or '' }}">
    </div>
    <div class="form-group">
      <label for="good3">良かったこと3</label>
      <input type="text" id="good3" name="good3" value="{{ edit and record.good3 or '' }}">
    </div>

    <button type="submit" class="button">{{ edit and "更新" or "保存" }}</button>
  </div>
</form>

{% endblock %}


  
  </form>
  <p>
    <a href="/history">これまでの記録を見る</a>
  </p>
  
  <p>
    <a href="/logout">ログアウト</a>
  </p>
  </div>
  <script>
    const dateInput = document.getElementById("recordDate");
    const dateDisplay = document.getElementById("dateDisplay");
  
    const weekdays = ["日", "月", "火", "水", "木", "金", "土"];
  
    dateInput.addEventListener("change", () => {
      if (!dateInput.value) return;
  
      const d = new Date(dateInput.value);
      const weekday = weekdays[d.getDay()];
  
      dateDisplay.textContent = `${dateInput.value}（${weekday}）`;
    });
  </script>
  
</body>
</html>
